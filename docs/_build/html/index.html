
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Welcome to OBIA4RTM’s documentation! &#8212; OBIA4RTM 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-obia4rtm-s-documentation">
<h1>Welcome to OBIA4RTM’s documentation!<a class="headerlink" href="#welcome-to-obia4rtm-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-OBIA4RTM.configurations.connect_db"></span><p>Created on Sat Jul 13 09:44:14 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.configurations.connect_db.close_db_connection">
<code class="sig-prename descclassname">OBIA4RTM.configurations.connect_db.</code><code class="sig-name descname">close_db_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">con</span></em>, <em class="sig-param"><span class="n">cursor</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/configurations/connect_db.html#close_db_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.configurations.connect_db.close_db_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>closes an opened database connection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>con</strong><span class="classifier">psycopg2 Database Connection</span></dt><dd><p>connection to be closed</p>
</dd>
<dt><strong>cursor</strong><span class="classifier">psycopg2 Database Cursor</span></dt><dd><p>cursor to be closed</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.configurations.connect_db.connect_db">
<code class="sig-prename descclassname">OBIA4RTM.configurations.connect_db.</code><code class="sig-name descname">connect_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/configurations/connect_db.html#connect_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.configurations.connect_db.connect_db" title="Permalink to this definition">¶</a></dt>
<dd><p>connect to PostgreSQL database by using the specifications
in ‘postgres.ini’ File in the root of the OBIA4RTM home directory
stored in the user-profile</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>conn</strong><span class="classifier">psycopg2 Database connection</span></dt><dd><p>connection object to PostgreSQL database</p>
</dd>
<dt>cursor psycopg2 Database cursor</dt><dd><p>cursor for querying and inserting data from and to PostgreSQL DB</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.configurations.connect_db.get_db_connection_details">
<code class="sig-prename descclassname">OBIA4RTM.configurations.connect_db.</code><code class="sig-name descname">get_db_connection_details</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/configurations/connect_db.html#get_db_connection_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.configurations.connect_db.get_db_connection_details" title="Permalink to this definition">¶</a></dt>
<dd><p>reads and returns the postgres.ini connection details</p>
<dl class="simple">
<dt>parser<span class="classifier">ConfigParser Object</span></dt><dd><p>parsed database configurations from postgres.ini file</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.configurations.db_management"></span><p>Created on Tue Jul 30 15:38:37 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.configurations.db_management.update_luc_table">
<code class="sig-prename descclassname">OBIA4RTM.configurations.db_management.</code><code class="sig-name descname">update_luc_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">landcover_table</span></em>, <em class="sig-param"><span class="n">landcover_cfg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/configurations/db_management.html#update_luc_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.configurations.db_management.update_luc_table" title="Permalink to this definition">¶</a></dt>
<dd><p>updates the land-cover/ land use table in OBIA4RTM that is required for
performing land-cover class specific vegetation parameter retrieval
Make sure that the classes in the config file match the land cover classes
provided for the image objects and used for generating the lookup-table.
Otherwise bad things might happen.</p>
<p>NOTE: in case land cover classes that are about to be inserted are already
stored in the table, they will be overwritten!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>landcover_table</strong><span class="classifier">String</span></dt><dd><p>name of the table with the land cover information (&lt;schema.table&gt;)</p>
</dd>
<dt><strong>landcover_cfg</strong><span class="classifier">String</span></dt><dd><p>file-path to land cover configurations file</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.configurations.logger"></span><p>Created on Fri Jul  5 14:11:59 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.configurations.logger.close_logger">
<code class="sig-prename descclassname">OBIA4RTM.configurations.logger.</code><code class="sig-name descname">close_logger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/configurations/logger.html#close_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.configurations.logger.close_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>close a logger after program shut-down and releases the handlers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>logger</strong><span class="classifier">logging Object</span></dt><dd><p>logger of OBIA4RTM ‘OBIA4RTM_logger’</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.configurations.logger.determine_logdir">
<code class="sig-prename descclassname">OBIA4RTM.configurations.logger.</code><code class="sig-name descname">determine_logdir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/configurations/logger.html#determine_logdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.configurations.logger.determine_logdir" title="Permalink to this definition">¶</a></dt>
<dd><p>searches the logging directory used for OBIA4RTM</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>log_dir</strong><span class="classifier">String</span></dt><dd><p>Path of logging directory</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.configurations.logger.get_logger">
<code class="sig-prename descclassname">OBIA4RTM.configurations.logger.</code><code class="sig-name descname">get_logger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logname</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/configurations/logger.html#get_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.configurations.logger.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>setups up a new logging object using Rotating File Handlers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>OBIA4RTM_log_dir</strong><span class="classifier">String</span></dt><dd><p>directory, the log-file should be written to</p>
</dd>
<dt><strong>logname</strong><span class="classifier">String</span></dt><dd><p>name of the logger (opt.); per default OBIA4RTM_Logger will be used</p>
</dd>
<dt><strong>Returns</strong></dt><dd></dd>
<dt><strong>——</strong></dt><dd></dd>
<dt><strong>logger</strong><span class="classifier">logging Logger</span></dt><dd><p>Logger with stream handler for tracing OBIA4RTM’s activities and errors</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.inversion.distributions"></span><p>Created on Sat Mar  9 09:03:14 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.inversion.distributions.gaussian">
<code class="sig-prename descclassname">OBIA4RTM.inversion.distributions.</code><code class="sig-name descname">gaussian</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minimum</span></em>, <em class="sig-param"><span class="n">maximum</span></em>, <em class="sig-param"><span class="n">num</span></em>, <em class="sig-param"><span class="n">mean</span></em>, <em class="sig-param"><span class="n">std</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/distributions.html#gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.distributions.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>draws a truncated gaussian distribution between min and max</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>minimum</strong><span class="classifier">float</span></dt><dd><p>lower bound of the truncated Gaussian distribution</p>
</dd>
<dt><strong>maximum</strong><span class="classifier">float</span></dt><dd><p>upper bound of the truncated Gaussian distribution</p>
</dd>
<dt><strong>num</strong><span class="classifier">Integer</span></dt><dd><p>number of samples to be drawn</p>
</dd>
<dt><strong>mean</strong><span class="classifier">float</span></dt><dd><p>centre of the truncated Gaussian distribution</p>
</dd>
<dt><strong>std</strong><span class="classifier">flaot</span></dt><dd><p>standard deviation, controlls the width of the distribution betweem
min and max</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>truncated</strong><span class="classifier">np.array</span></dt><dd><p>Array with values drawn from the truncated Gaussian distribution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.inversion.distributions.uniform">
<code class="sig-prename descclassname">OBIA4RTM.inversion.distributions.</code><code class="sig-name descname">uniform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minimum</span></em>, <em class="sig-param"><span class="n">maximum</span></em>, <em class="sig-param"><span class="n">num</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/distributions.html#uniform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.distributions.uniform" title="Permalink to this definition">¶</a></dt>
<dd><p>draws a uniform distribution between min and max</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>minimum</strong><span class="classifier">float</span></dt><dd><p>lower bound of the uniform distribution</p>
</dd>
<dt><strong>maximum</strong><span class="classifier">float</span></dt><dd><p>upper bound of the uniform distribution</p>
</dd>
<dt><strong>num</strong><span class="classifier">Integer</span></dt><dd><p>number of samples to be drawn</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>uni</strong><span class="classifier">np.array</span></dt><dd><p>Array with values drawn from the uniform distribution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.inversion.handle_metadata"></span><p>Created on Sat Mar  9 10:58:16 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<dl class="py function">
<dt id="OBIA4RTM.inversion.handle_metadata.get_bands">
<code class="sig-prename descclassname">OBIA4RTM.inversion.handle_metadata.</code><code class="sig-name descname">get_bands</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">cursor</span></em>, <em class="sig-param"><span class="n">sensor</span></em>, <em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/handle_metadata.html#get_bands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.handle_metadata.get_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>reads in sensor band centers and FWHM stored in database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>conn</strong><span class="classifier">psycopg2 Database connection</span></dt><dd><p>connection to OBIA4RTM PostgreSQL database</p>
</dd>
<dt><strong>cursor</strong><span class="classifier">psycopg2 Database cursor</span></dt><dd><p>cursor for DB inserts and queries</p>
</dd>
<dt><strong>sensor</strong><span class="classifier">String</span></dt><dd><p>name of the sensor; currently either ‘S2A’ or ‘S2B’</p>
</dd>
<dt><strong>logger</strong><span class="classifier">logging Logger</span></dt><dd><p>for recording errors to the log file</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>centers</strong><span class="classifier">List</span></dt><dd><p>list of central wavelengths of the spectral bands of the sensor (nm)</p>
</dd>
<dt><strong>fwhm</strong><span class="classifier">List</span></dt><dd><p>list of the full width half maximum of the spectral bands (nm)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.inversion.handle_metadata.get_resampler">
<code class="sig-prename descclassname">OBIA4RTM.inversion.handle_metadata.</code><code class="sig-name descname">get_resampler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">cursor</span></em>, <em class="sig-param"><span class="n">sensor</span></em>, <em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/handle_metadata.html#get_resampler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.handle_metadata.get_resampler" title="Permalink to this definition">¶</a></dt>
<dd><p>get the spectral properties of a sensor and generate a resampler object.
Currently, Sentinel-2A and Sentinel-2B are supported</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>conn</strong><span class="classifier">psycopg2 Database connection</span></dt><dd><p>connection to OBIA4RTM PostgreSQL database</p>
</dd>
<dt><strong>cursor</strong><span class="classifier">psycopg2 Database cursor</span></dt><dd><p>cursor for DB inserts and queries</p>
</dd>
<dt><strong>sensor</strong><span class="classifier">String</span></dt><dd><p>name of the sensor; currently either ‘S2A’ or ‘S2B’</p>
</dd>
<dt><strong>logger</strong><span class="classifier">logging Logger</span></dt><dd><p>for recording errors to the log file</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>resampler</strong><span class="classifier">spectral BandResampler</span></dt><dd><p>Resampler Object for resampling the ProSAIL output to the spectral
resolution of Sentinel-2</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.inversion.handle_prosail_cfg"></span><p>Created on Sat Jul 13 11:14:32 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.inversion.handle_prosail_cfg.get_landcover_classes">
<code class="sig-prename descclassname">OBIA4RTM.inversion.handle_prosail_cfg.</code><code class="sig-name descname">get_landcover_classes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">landcover_cfg</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/handle_prosail_cfg.html#get_landcover_classes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.handle_prosail_cfg.get_landcover_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>get the number and names of the land cover classes
stored in the ProSAIL.cfg file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cfg_file</strong><span class="classifier">String</span></dt><dd><p>path to the land cover configuration file</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>luc_classes</strong><span class="classifier">List</span></dt><dd><p>list of landcover classes (code + semantics)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.inversion.handle_prosail_cfg.read_params_per_class">
<code class="sig-prename descclassname">OBIA4RTM.inversion.handle_prosail_cfg.</code><code class="sig-name descname">read_params_per_class</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prosail_cfg</span></em>, <em class="sig-param"><span class="n">landcover_cfg</span></em>, <em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/handle_prosail_cfg.html#read_params_per_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.handle_prosail_cfg.read_params_per_class" title="Permalink to this definition">¶</a></dt>
<dd><p>reads in the vegetation parameters for the ProSAIL model for each
land cover class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cfg_file</strong><span class="classifier">String</span></dt><dd><p>path to the ProSAIL configurations file</p>
</dd>
<dt><strong>landcover_cfg</strong><span class="classifier">String</span></dt><dd><p>path to the landcover configuration file</p>
</dd>
<dt><strong>logger</strong><span class="classifier">logging.Logger</span></dt><dd><p>for recording errors</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>container</strong><span class="classifier">Dictionary</span></dt><dd><p>dict with the ProSAIL parameters per land cover class</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.inversion.inversion"></span><p>Created on Sat Mar  9 10:34:57 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py class">
<dt id="OBIA4RTM.inversion.inversion.inversion">
<em class="property">class </em><code class="sig-prename descclassname">OBIA4RTM.inversion.inversion.</code><code class="sig-name descname">inversion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scene_id</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion" title="Permalink to this definition">¶</a></dt>
<dd><p>super-class for the object-based inversion of satellite scenes</p>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.inversion.inversion.do_inversion" title="OBIA4RTM.inversion.inversion.inversion.do_inversion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">do_inversion</span></code></a>(self, land_use, num_solutions, …)</p></td>
<td><p>performs inversion on all objects for a given date.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.inversion.inversion.do_obj_inversion" title="OBIA4RTM.inversion.inversion.inversion.do_obj_inversion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">do_obj_inversion</span></code></a>(self, object_id, …)</p></td>
<td><p>performs inversion per single object using mean of xx best solutions (RMSE criterion) and stores result results table params to be inverted/ returned should be passed as list of strings e.g: inv_params = [“LAI”, “CAB”] also inverted spectra can be returned: therefore just append the band numbers to the list of strings of parameters: e.g.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.inversion.inversion.gen_lut" title="OBIA4RTM.inversion.inversion.inversion.gen_lut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gen_lut</span></code></a>(self, inv_mapping_table, inv_table)</p></td>
<td><p>Generates the lookup table and stores it in the DB must be run seperately from the inversion part</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.inversion.inversion.get_scene_metadata" title="OBIA4RTM.inversion.inversion.inversion.get_scene_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_scene_metadata</span></code></a>(self)</p></td>
<td><p>queries the relevant scene metadata from the database</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.inversion.inversion.set_ProSAIL_config" title="OBIA4RTM.inversion.inversion.inversion.set_ProSAIL_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_ProSAIL_config</span></code></a>(self[, path_to_config])</p></td>
<td><p>read in the config file holding the vegetation parameters for setting up the lookup table using the ProSAIL radiative transfer model</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.inversion.inversion.set_landcover_config" title="OBIA4RTM.inversion.inversion.inversion.set_landcover_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_landcover_config</span></code></a>(self[, path_to_lc_config])</p></td>
<td><p>read in the land cover config file holding the land cover classes for setting up the lookup table using the ProSAIL radiative transfer model</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.inversion.inversion.set_soilrefl" title="OBIA4RTM.inversion.inversion.inversion.set_soilrefl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_soilrefl</span></code></a>(self[, path_to_soilrefl_file])</p></td>
<td><p>set up the file-path to the txt file containing the soil-reflectance required for ProSAIL to account for the soil background and read in the values</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="OBIA4RTM.inversion.inversion.inversion.do_inversion">
<code class="sig-name descname">do_inversion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">land_use</span></em>, <em class="sig-param"><span class="n">num_solutions</span></em>, <em class="sig-param"><span class="n">res_table</span></em>, <em class="sig-param"><span class="n">object_table</span></em>, <em class="sig-param"><span class="n">inv_mapping_table</span></em>, <em class="sig-param"><span class="n">lut_table</span></em>, <em class="sig-param"><span class="n">return_specs</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion.do_inversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion.do_inversion" title="Permalink to this definition">¶</a></dt>
<dd><p>performs inversion on all objects for a given date.
NOTE: the object reflectance values must be already available in the data
base.
Run gen_lut therefore before!
Works as a wrapper around the do_object_inversion method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>lande_use</strong><span class="classifier">Integer</span></dt><dd><p>land cover code for the specific object and date</p>
</dd>
<dt><strong>num_solutions</strong><span class="classifier">Integer</span></dt><dd><p>how many solutions should be used for generating the inversion result</p>
</dd>
<dt><strong>res_table</strong><span class="classifier">String</span></dt><dd><p>tablename where to store the results of the inversion
(&lt;schema.table&gt;)</p>
</dd>
<dt><strong>object_table</strong><span class="classifier">String</span></dt><dd><p>tablename of table containing the object spectra (&lt;schema.table&gt;)</p>
</dd>
<dt><strong>inv_mapping_table</strong><span class="classifier">String</span></dt><dd><p>tablename of the table containing the parameters to be inverted
per acqusition date (scene) and land use/ cover class</p>
</dd>
<dt><strong>lut_table</strong><span class="classifier">String</span></dt><dd><p>table containing the ProSAIL lut on a per scene and landuse / cover
class base</p>
</dd>
<dt><strong>return_specs</strong><span class="classifier">Boolean</span></dt><dd><p>determines whether inverted spectra should be returned (True; default)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.inversion.inversion.inversion.do_obj_inversion">
<code class="sig-name descname">do_obj_inversion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">object_id</span></em>, <em class="sig-param"><span class="n">acqui_date</span></em>, <em class="sig-param"><span class="n">land_use</span></em>, <em class="sig-param"><span class="n">num_solutions</span></em>, <em class="sig-param"><span class="n">inv_params</span></em>, <em class="sig-param"><span class="n">res_table</span></em>, <em class="sig-param"><span class="n">object_table</span></em>, <em class="sig-param"><span class="n">lut_table</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion.do_obj_inversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion.do_obj_inversion" title="Permalink to this definition">¶</a></dt>
<dd><p>performs inversion per single object using mean of xx best
solutions (RMSE criterion) and stores result results table
params to be inverted/ returned should be passed as list of strings
e.g: inv_params = [“LAI”, “CAB”]
also inverted spectra can be returned: therefore just append the band
numbers to the list of strings of parameters:
e.g. inv_params = [“LAI”, “CAB”, “B2”, “B3”, etc.]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>object_id</strong><span class="classifier">Integer</span></dt><dd><p>ID of the current object (derived from OBIA4RTM database)</p>
</dd>
<dt><strong>acqui_date</strong><span class="classifier">Date (YYYY-MM-DD)</span></dt><dd><p>acquisition date of the image used for the inversion</p>
</dd>
<dt><strong>lande_use</strong><span class="classifier">Integer</span></dt><dd><p>land cover code for the specific object and date</p>
</dd>
<dt><strong>num_solutions</strong><span class="classifier">Integer</span></dt><dd><p>how many solutions should be used for generating the inversion result</p>
</dd>
<dt><strong>inv_params</strong><span class="classifier">List</span></dt><dd><p>list of the parameters (must be named) to be inverted</p>
</dd>
<dt><strong>res_table</strong><span class="classifier">String</span></dt><dd><p>tablename where to store the results of the inversion
(&lt;schema.table&gt;)</p>
</dd>
<dt><strong>object_table</strong><span class="classifier">String</span></dt><dd><p>tablename of the table containing the object spectra
(&lt;schema.table&gt;)</p>
</dd>
<dt><strong>lut_table</strong><span class="classifier">String</span></dt><dd><p>tablename of the lookup-table (&lt;schema.table&gt;)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>status</strong><span class="classifier">Integer</span></dt><dd><p>zero if everything is OK</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.inversion.inversion.inversion.gen_lut">
<code class="sig-name descname">gen_lut</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">inv_mapping_table</span></em>, <em class="sig-param"><span class="n">inv_table</span></em>, <em class="sig-param"><span class="n">landcover_config_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prosail_config_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">soil_path</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion.gen_lut"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion.gen_lut" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the lookup table and stores it in the DB
must be run seperately from the inversion part</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inv_mapping_table</strong><span class="classifier">String</span></dt><dd><p>name of the table storing the inversion mapping required for
performing the inversion</p>
</dd>
<dt><strong>inv_table</strong><span class="classifier">String</span></dt><dd><p>Name of the table the lookup-table should be written to
(&lt;schema.table&gt;)</p>
</dd>
<dt><strong>landcover_config_path</strong><span class="classifier">String</span></dt><dd><p>file-path to landcover config file (opt.; per default the OBIA4RTM
delivered file will be used)</p>
</dd>
<dt><strong>prosail_config_path</strong><span class="classifier">String</span></dt><dd><p>file-path to landcover config file (opt.; per default the OBIA4RTM
delivered file will be used)</p>
</dd>
<dt><strong>soil_path</strong><span class="classifier">String</span></dt><dd><p>file-path to file with soil reflectance values (opt.; per default
the OBIA4RTM delivered file will be used)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.inversion.inversion.inversion.get_scene_metadata">
<code class="sig-name descname">get_scene_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion.get_scene_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion.get_scene_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>queries the relevant scene metadata from the database</p>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.inversion.inversion.inversion.set_ProSAIL_config">
<code class="sig-name descname">set_ProSAIL_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">path_to_config</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion.set_ProSAIL_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion.set_ProSAIL_config" title="Permalink to this definition">¶</a></dt>
<dd><p>read in the config file holding the vegetation parameters for
setting up the lookup table using the ProSAIL radiative transfer
model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path_to_config</strong><span class="classifier">String</span></dt><dd><p>optinal, path and filename of config-file for ProSAIL</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>path_to_config</strong><span class="classifier">String</span></dt><dd><p>definite location of the config file or error if file not found</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.inversion.inversion.inversion.set_landcover_config">
<code class="sig-name descname">set_landcover_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">path_to_lc_config</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion.set_landcover_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion.set_landcover_config" title="Permalink to this definition">¶</a></dt>
<dd><p>read in the land cover config file holding the land cover classes for
setting up the lookup table using the ProSAIL radiative transfer
model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path_to_lc_config</strong><span class="classifier">String</span></dt><dd><p>optinal, path and filename of config-file for land cover classes</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>path_to_config</strong><span class="classifier">String</span></dt><dd><p>definite location of the config file or error if file not found</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.inversion.inversion.inversion.set_soilrefl">
<code class="sig-name descname">set_soilrefl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">path_to_soilrefl_file</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/inversion.html#inversion.set_soilrefl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.inversion.inversion.set_soilrefl" title="Permalink to this definition">¶</a></dt>
<dd><p>set up the file-path to the txt file containing
the soil-reflectance required for ProSAIL to account for
the soil background and read in the values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path_to_soilrefl_file</strong><span class="classifier">String</span></dt><dd><p>optional, file to the txt file with soil reflectance values</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>soils</strong><span class="classifier">Numpy Array</span></dt><dd><p>array of soil reflectance values (1 nm steps)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-OBIA4RTM.inversion.lookup_table"></span><p>Created on Sat Mar  9 06:52:00 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py class">
<dt id="OBIA4RTM.inversion.lookup_table.lookup_table">
<em class="property">class </em><code class="sig-prename descclassname">OBIA4RTM.inversion.lookup_table.</code><code class="sig-name descname">lookup_table</code><a class="reference internal" href="_modules/OBIA4RTM/inversion/lookup_table.html#lookup_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.lookup_table.lookup_table" title="Permalink to this definition">¶</a></dt>
<dd><p>class for creating and storing biophysical parameters
in a lookup table (LUT) like structure</p>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.inversion.lookup_table.lookup_table.generate_param_lut" title="OBIA4RTM.inversion.lookup_table.lookup_table.generate_param_lut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_param_lut</span></code></a>(self, params)</p></td>
<td><p>get the minima, maxima, number and distribution type of parameters to be inverted and prepares them for storing in a LUT accordingly</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="OBIA4RTM.inversion.lookup_table.lookup_table.generate_param_lut">
<code class="sig-name descname">generate_param_lut</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">params</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/inversion/lookup_table.html#lookup_table.generate_param_lut"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.inversion.lookup_table.lookup_table.generate_param_lut" title="Permalink to this definition">¶</a></dt>
<dd><p>get the minima, maxima, number and distribution type of parameters
to be inverted and prepares them for storing in a LUT accordingly</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>params</strong><span class="classifier">numpy array</span></dt><dd><p>Array containing the ProSAIL parameters extracted from cfg file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-OBIA4RTM.S2_PreProcessor.atmospheric"></span><p>Created on Fri Jul 26 13:40:53 2019</p>
<p>This file is part of the (optinial) OBIA4RTM Pre-processing tools for Sentinel-2 in
OBIA4RTM using Google-Earthengine Python API client bindings</p>
<p>&#64;author: Sam Murphy; forked from Github on 26th July 2019 from
<a class="reference external" href="https://github.com/samsammurphy/gee-atmcorr-S2/edit/master/bin/atmospheric.py">https://github.com/samsammurphy/gee-atmcorr-S2/edit/master/bin/atmospheric.py</a></p>
<p>atmospheric.py, Sam Murphy (2016-10-26)</p>
<p>Atmospheric water vapour, ozone and AOT from GEE</p>
<p>Usage
H2O = Atmospheric.water(geom,date)
O3 = Atmospheric.ozone(geom,date)
AOT = Atmospheric.aerosol(geom,date)</p>
<span class="target" id="module-OBIA4RTM.S2_PreProcessor.cloud_masking"></span><p>Created on Sun Jul 28 10:18:46 2019</p>
<p>This module is part of OBIA4RTM (GEE extension) with many parts taken directly
from <a class="reference external" href="https://github.com/samsammurphy/cloud-masking-sentinel2/blob/master/cloud-masking-sentinel2.ipynb">https://github.com/samsammurphy/cloud-masking-sentinel2/blob/master/cloud-masking-sentinel2.ipynb</a>
(available under Apache 2.0 license)</p>
<p>Slight changes were applied to translate the original code provided as Jupyter
Notebook into the OBIA4RTM architecture. Functionalities were not altered.</p>
<p>Copyright (c) 2019 Lukas Graf, Sam Murphy</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><p>Apache License</p>
</div></blockquote>
<p>Version 2.0, January 2004</p>
</div></blockquote>
<p><a class="reference external" href="http://www.apache.org/licenses/">http://www.apache.org/licenses/</a></p>
</div></blockquote>
<p>TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION</p>
<ol class="arabic">
<li><p>Definitions.</p>
<p>“License” shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.</p>
<p>“Licensor” shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.</p>
<p>“Legal Entity” shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
“control” means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.</p>
<p>“You” (or “Your”) shall mean an individual or Legal Entity
exercising permissions granted by this License.</p>
<p>“Source” form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.</p>
<p>“Object” form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.</p>
<p>“Work” shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).</p>
<p>“Derivative Works” shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.</p>
<p>“Contribution” shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, “submitted”
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as “Not a Contribution.”</p>
<p>“Contributor” shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.</p>
</li>
<li><p>Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.</p></li>
<li><p>Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.</p></li>
<li><p>Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
meet the following conditions:</p>
<ol class="loweralpha simple">
<li><p>You must give any other recipients of the Work or
Derivative Works a copy of this License; and</p></li>
<li><p>You must cause any modified files to carry prominent notices
stating that You changed the files; and</p></li>
<li><p>You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and</p></li>
<li><p>If the Work includes a “NOTICE” text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.</p></li>
</ol>
<p>You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.</p>
</li>
<li><p>Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.</p></li>
<li><p>Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.</p></li>
<li><p>Disclaimer of Warranty. Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.</p></li>
<li><p>Limitation of Liability. In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
work stoppage, computer failure or malfunction, or any and all
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.</p></li>
<li><p>Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.</p></li>
</ol>
<p>END OF TERMS AND CONDITIONS</p>
<p>APPENDIX: How to apply the Apache License to your work.</p>
<blockquote>
<div><p>To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets “{}”
replaced with your own identifying information. (Don’t include
the brackets!)  The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same “printed page” as the copyright notice for easier
identification within third-party archives.</p>
</div></blockquote>
<p>Copyright {yyyy} {name of copyright owner}</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div></blockquote>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a>, Sam Murphy</p>
<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.cloud_masking.ESAcloudMask">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.cloud_masking.</code><code class="sig-name descname">ESAcloudMask</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/cloud_masking.html#ESAcloudMask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.cloud_masking.ESAcloudMask" title="Permalink to this definition">¶</a></dt>
<dd><p>European Space Agency (ESA) clouds from ‘QA60’, i.e. Quality Assessment band at 60m</p>
<p>parsed by Nick Clinton</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>img</strong><span class="classifier">gee.image.Image</span></dt><dd><p>Sentinel-2 Image for which the cloud mask should be calculated</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>img</strong><span class="classifier">gee.image.Image</span></dt><dd><p>Sentinel-2 image with cloud score as extra band</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.cloud_masking.mask_clouds">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.cloud_masking.</code><code class="sig-name descname">mask_clouds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s2_image</span></em>, <em class="sig-param"><span class="n">option</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/cloud_masking.html#mask_clouds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.cloud_masking.mask_clouds" title="Permalink to this definition">¶</a></dt>
<dd><p>this function masks out clouds from Sentinel-2 TOA imagery using the
quality information provided by the ESA-internal pre-processing chain
(Level 1C).
Quality flag bits 10 and 11 (clouds and cirrus, respectively) are masked
out. Of course, this is only a very rough cloud correction approach
as shadowing effects are disregarded.
Therefore, users might come up with a more sophisticated soluation for
their own processing workflow</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>s2_image</strong><span class="classifier">ee.image.Image</span></dt><dd><p>Sentinel-2 imagery (from GEE) to be masked for clouds and cirrus</p>
</dd>
<dt><strong>option</strong><span class="classifier">Integer</span></dt><dd><p>two options (1 and 2) are available for cloud masking
1 = use ESA quality information
2 = use Matt Hancher for Landsat imagery adapted to Sentinel by 
Chris Hewig and Ian Housman</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>s2_masked</strong><span class="classifier">ee.image.Image</span></dt><dd><p>Sentinel-2 imagery with masked clouds and cirrus (if any)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.cloud_masking.rescale">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.cloud_masking.</code><code class="sig-name descname">rescale</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img</span></em>, <em class="sig-param"><span class="n">thresholds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/cloud_masking.html#rescale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.cloud_masking.rescale" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear stretch of image between two threshold values.
Taken from
<a class="reference external" href="https://github.com/samsammurphy/cloud-masking-sentinel2/blob/master/cloud-masking-sentinel2.ipynb">https://github.com/samsammurphy/cloud-masking-sentinel2/blob/master/cloud-masking-sentinel2.ipynb</a>
Availabe under Apache 2.0 licence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>img</strong><span class="classifier">gee.image.Image</span></dt><dd><p>Image the stretch should be apploed two</p>
</dd>
<dt><strong>thresholds</strong><span class="classifier">List</span></dt><dd><p>list with two elemts specifying upper and lower bound for stretching</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>img</strong><span class="classifier">gee.image.Image</span></dt><dd><p>stretched image</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.cloud_masking.sentinelCloudScore">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.cloud_masking.</code><code class="sig-name descname">sentinelCloudScore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/cloud_masking.html#sentinelCloudScore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.cloud_masking.sentinelCloudScore" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes spectral indices of cloudyness and takes the minimum of them.</p>
<p>Each spectral index is fairly lenient because the group minimum 
is a somewhat stringent comparison policy.
side note -&gt; this seems like a job for machine learning :)</p>
<p>originally written by Matt Hancher for Landsat imagery
adapted to Sentinel by Chris Hewig and Ian Housman</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>img</strong><span class="classifier">gee.image.Image</span></dt><dd><p>Sentinel-2 Image for which the cloud mask should be calculated</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>img</strong><span class="classifier">gee.image.Image</span></dt><dd><p>Sentinel-2 image with cloud score as extra band</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.cloud_masking.shadowMask">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.cloud_masking.</code><code class="sig-name descname">shadowMask</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img</span></em>, <em class="sig-param"><span class="n">cloudMaskType</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/cloud_masking.html#shadowMask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.cloud_masking.shadowMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds cloud shadows in images
Originally by Gennadii Donchyts, adapted by Ian Housman
NOTE: the cloud mask must have been computed and added as separate
band to the Sentinel-2 imagery</p>
</dd></dl>

<span class="target" id="module-OBIA4RTM.S2_PreProcessor.install_6S"></span><p>Created on Fri Jul 26 15:42:10 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.install_6S.install_6S">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.install_6S.</code><code class="sig-name descname">install_6S</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">link</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/install_6S.html#install_6S"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.install_6S.install_6S" title="Permalink to this definition">¶</a></dt>
<dd><p>installs the 6S algorithm required for atmospheric correction from
the Fortran source code using gfortran.
The sources will be installed to the OBIA4RTM install dir
(somewhere in the user profile) where also the config files are stored.</p>
<p>Currently, only Linux/ Unix systems are supported for this operation.</p>
<p>In case you expire any problems automatically downloading and building
6S, please also consult: <a class="reference external" href="https://py6s.readthedocs.io/en/latest/installation.html">https://py6s.readthedocs.io/en/latest/installation.html</a></p>
<p>Windows-Users please note that the installation might not be that smoothly
as on Posix, as you will have to install a bunch of additional functionalities</p>
</dd></dl>

<span class="target" id="module-OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor"></span><p>Created on Fri Jul 26 13:45:23 2019</p>
<p>This module is part of OBIA4RTM with code taken from
<a class="reference external" href="https://github.com/samsammurphy/gee-atmcorr-S2">https://github.com/samsammurphy/gee-atmcorr-S2</a> available under Apache 2.0 licence
This module contains a class that is mainly a object-oriented version of the
jupyter notebook available in the repository outlined above. Some modifactions
were made to fit the requirements of OBIA4RTM.</p>
<p>NOTE: This module makes use of Google Earth Engine.
For setting up the Python Client API please see:</p>
<blockquote>
<div><p><a class="reference external" href="https://developers.google.com/earth-engine/python_install">https://developers.google.com/earth-engine/python_install</a></p>
</div></blockquote>
<p>Copyright (c) Sam Murphy (<a class="reference external" href="https://github.com/samsammurphy">https://github.com/samsammurphy</a>)</p>
<p>Slight changes from the original source code were made (class structure);
functionalities themselves have not been altered</p>
<dl>
<dt>Apache License</dt><dd><blockquote>
<div><blockquote>
<div><p>Version 2.0, January 2004</p>
</div></blockquote>
<p><a class="reference external" href="http://www.apache.org/licenses/">http://www.apache.org/licenses/</a></p>
</div></blockquote>
<p>TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION</p>
<ol class="arabic">
<li><p>Definitions.</p>
<p>“License” shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.</p>
<p>“Licensor” shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.</p>
<p>“Legal Entity” shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
“control” means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.</p>
<p>“You” (or “Your”) shall mean an individual or Legal Entity
exercising permissions granted by this License.</p>
<p>“Source” form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.</p>
<p>“Object” form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.</p>
<p>“Work” shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).</p>
<p>“Derivative Works” shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.</p>
<p>“Contribution” shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, “submitted”
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as “Not a Contribution.”</p>
<p>“Contributor” shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.</p>
</li>
<li><p>Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.</p></li>
<li><p>Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.</p></li>
<li><p>Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
meet the following conditions:</p>
<ol class="loweralpha simple">
<li><p>You must give any other recipients of the Work or
Derivative Works a copy of this License; and</p></li>
<li><p>You must cause any modified files to carry prominent notices
stating that You changed the files; and</p></li>
<li><p>You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and</p></li>
<li><p>If the Work includes a “NOTICE” text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.</p></li>
</ol>
<p>You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.</p>
</li>
<li><p>Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.</p></li>
<li><p>Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.</p></li>
<li><p>Disclaimer of Warranty. Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.</p></li>
<li><p>Limitation of Liability. In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
work stoppage, computer failure or malfunction, or any and all
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.</p></li>
<li><p>Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.</p></li>
</ol>
<p>END OF TERMS AND CONDITIONS</p>
<p>APPENDIX: How to apply the Apache License to your work.</p>
<blockquote>
<div><p>To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets “{}”
replaced with your own identifying information. (Don’t include
the brackets!)  The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same “printed page” as the copyright notice for easier
identification within third-party archives.</p>
</div></blockquote>
<p>Copyright {yyyy} {name of copyright owner}</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</dd>
</dl>
<dl class="py class">
<dt id="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr">
<em class="property">class </em><code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.</code><code class="sig-name descname">s2_Py6S_atcorr</code><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_Py6S_attcor.html#s2_Py6S_atcorr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr" title="Permalink to this definition">¶</a></dt>
<dd><p>class for performing Sentinel-2 atmospheric correction of Top-of-Atmosphere
imagery to Surface Reflectance values using the 6S algorithm.
Code written by Sam Murphy (<a class="reference external" href="https://github.com/samsammurphy">https://github.com/samsammurphy</a>) and made
availabe via Apache License 2.0 on Github
(<a class="reference external" href="https://github.com/samsammurphy/gee-atmcorr-S2">https://github.com/samsammurphy/gee-atmcorr-S2</a>).
Slightly modified by Lukas Graf for usage in OBIA4RTM</p>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.run_py6s" title="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.run_py6s"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_py6s</span></code></a>(self, geom, acqui_date[, option])</p></td>
<td><p>runs the 6S algorithm for atmospheric correction on a user-defined geometry and date on Sentinel-2 imagery Requires Google Earth-Engine Python API client</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.spectralResponseFunction" title="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.spectralResponseFunction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spectralResponseFunction</span></code></a>(bandname)</p></td>
<td><p>Extract spectral response function for given band name Modification of the original source code: only those bands are available that are used in OBIA4RTM</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.surface_reflectance" title="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.surface_reflectance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">surface_reflectance</span></code></a>(self, s, bandname)</p></td>
<td><p>Calculate surface reflectance from at-sensor radiance given waveband name using the 6S algorithm</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.toa_to_rad" title="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.toa_to_rad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">toa_to_rad</span></code></a>(self, bandname)</p></td>
<td><p>Converts top of atmosphere reflectance to at-sensor radiance</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.run_py6s">
<code class="sig-name descname">run_py6s</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">geom</span></em>, <em class="sig-param"><span class="n">acqui_date</span></em>, <em class="sig-param"><span class="n">option</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_Py6S_attcor.html#s2_Py6S_atcorr.run_py6s"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.run_py6s" title="Permalink to this definition">¶</a></dt>
<dd><p>runs the 6S algorithm for atmospheric correction on a user-defined
geometry and date on Sentinel-2 imagery
Requires Google Earth-Engine Python API client</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>geom</strong><span class="classifier">EE-Geometry</span></dt><dd><p>Google EE geometry specify the geographic extent to be processed</p>
</dd>
<dt><strong>acqui_date</strong><span class="classifier">String</span></dt><dd><p>date (YYYY-MM-dd) of the desired scene to be processed</p>
</dd>
<dt><strong>option</strong><span class="classifier">Integer</span></dt><dd><p>for computing the cloud mask the user can decide whether the
ESA delivered quality layer should be used for cloud masking
(option=1) or an alternative approach originally developed for
Landsat TM (option=2) should be used (Def=1)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>s2_surf</strong><span class="classifier">ee.image.Image</span></dt><dd><p>Google EE image instance with surface reflectance values
and two additional bands containing Clouds (‘CloudMask’) and
detected cloud shadows (‘CloudShadows’)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.spectralResponseFunction">
<em class="property">static </em><code class="sig-name descname">spectralResponseFunction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bandname</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_Py6S_attcor.html#s2_Py6S_atcorr.spectralResponseFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.spectralResponseFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract spectral response function for given band name
Modification of the original source code:
only those bands are available that are used in OBIA4RTM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>bandname</strong><span class="classifier">String</span></dt><dd><p>Name of the Sentinel-2 spectral band to be processed, only the
nine Sentinel-2 bands used in OBIA4RTM are processed</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>Wavelength</strong><span class="classifier">Tuple</span></dt><dd><p>wavelengths of the desired Sentinel-2 band (required for 6S to run)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.surface_reflectance">
<code class="sig-name descname">surface_reflectance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">s</span></em>, <em class="sig-param"><span class="n">bandname</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_Py6S_attcor.html#s2_Py6S_atcorr.surface_reflectance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.surface_reflectance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate surface reflectance from at-sensor radiance given waveband name
using the 6S algorithm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>s</strong><span class="classifier">Six6 object</span></dt><dd><p>object of Py6S class</p>
</dd>
<dt><strong>bandname</strong><span class="classifier">String</span></dt><dd><p>name of the Sentinel-2 spectral band to be processed, only the
nine Sentinel-2 bands used in OBIA4RTM are processed</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ref</strong><span class="classifier">ee.image.Image</span></dt><dd><p>surface reflectance</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.toa_to_rad">
<code class="sig-name descname">toa_to_rad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">bandname</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_Py6S_attcor.html#s2_Py6S_atcorr.toa_to_rad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_Py6S_attcor.s2_Py6S_atcorr.toa_to_rad" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts top of atmosphere reflectance to at-sensor radiance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>bandname</strong><span class="classifier">String</span></dt><dd><p>name of the Sentinel-2 spectral band to be processed, only the
nine Sentinel-2 bands used in OBIA4RTM are processed</p>
</dd>
<dt><strong>info</strong><span class="classifier">Dictionary</span></dt><dd><p>metadata available form GEE image</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>rad</strong><span class="classifier">ee.image.Image</span></dt><dd><p>At sensor Radiance</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor"></span><p>Created on Wed Jul 31 12:32:24 2019</p>
<p>This module is part of OBIA4RTM.
It is part of the (optional) Sen2Core preprocessing wrapper addon that takes
care about image preprocessing (i.e atmospheric correction) using Sen2Core
software (see: <a class="reference external" href="http://step.esa.int/main/third-party-plugins-2/sen2cor/">http://step.esa.int/main/third-party-plugins-2/sen2cor/</a>)</p>
<p>NOTE: Sen2Core must be installed on your computer!</p>
<p>NOTE: Windows users might have to add the GDAL binaries (they come with OSGEO)
to their PATH variable</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.call_gdal_merge">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.</code><code class="sig-name descname">call_gdal_merge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sentinel_data_dir_l2</span></em>, <em class="sig-param"><span class="n">resolution</span></em>, <em class="sig-param"><span class="n">storage_dir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_sen2core_attcor.html#call_gdal_merge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.call_gdal_merge" title="Permalink to this definition">¶</a></dt>
<dd><p>calls the gdal_merge.py script to make an image layer stack and prepare
the imagery for usage in OBIA4RTM.
Outputs a GeoTiff with the nine Sentinel-2 bands used in OBIA4RTM
and the SCL band that contains the preclassification information.</p>
<p>You can use this function also if you L2 data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sentinel_data_dir_l2</strong><span class="classifier">String</span></dt><dd><p>path of the directory containing the output of sen2core in L2 level</p>
</dd>
<dt><strong>resolution</strong><span class="classifier">Integer</span></dt><dd><p>spatial resolution of the atmospherically corrected imagery
possible value: 10, 20, 60 meters</p>
</dd>
<dt><strong>storage_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory the layer stack should be moved to. If None,
the layer stack will remain the sentinel_data_dir_l2 in the img folder</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fname_stack</strong><span class="classifier">String</span></dt><dd><p>file-path to the stacked imagery</p>
</dd>
<dt><strong>metadata_xml</strong><span class="classifier">String</span></dt><dd><p>file-path to the metadata xml file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.call_sen2core">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.</code><code class="sig-name descname">call_sen2core</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sentinel_data_dir</span></em>, <em class="sig-param"><span class="n">zipped</span></em>, <em class="sig-param"><span class="n">resolution</span></em>, <em class="sig-param"><span class="n">path_sen2core</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_sen2core_attcor.html#call_sen2core"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.call_sen2core" title="Permalink to this definition">¶</a></dt>
<dd><p>calls Sen2Core and runs it on a downloaded Sentinel 1C dataset to
convert it to Level 2A.
The output spatial resolution must be provided (10, 20 or 60 meters)</p>
<p>NOTE: If you have already L2 imagery then only run the gdal_merge wrapper
and to not use this function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sentinel_data_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory that contains the Level-1C data. In case
the data is zipped (default when downloaded from Copernicus) specify
the file-path of the zip</p>
</dd>
<dt><strong>zipped</strong><span class="classifier">Boolean</span></dt><dd><p>specifies if the directory with the Sat data is zipped</p>
</dd>
<dt><strong>resolution</strong><span class="classifier">Integer</span></dt><dd><p>spatial resolution of the atmospherically corrected imagery
possible value: 10, 20, 60 meters</p>
</dd>
<dt><strong>path_sen2core</strong><span class="classifier">String</span></dt><dd><p>directory containing Sen2Core software (top-most level; e.g.
/home/user/Sen2Core/). Must be the same directory as specified
during the Sen2Core installation process using the –target option</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sentinel_data_dir_l2</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.check_sen2core_installation">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.</code><code class="sig-name descname">check_sen2core_installation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_sen2core_attcor.html#check_sen2core_installation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.check_sen2core_installation" title="Permalink to this definition">¶</a></dt>
<dd><p>check if Sen2Core is installed and can be used</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path</strong><span class="classifier">String</span></dt><dd><p>user-provided path to Sen2Core installation directory</p>
</dd>
<dt><strong>Returns</strong></dt><dd></dd>
<dt><strong>——-</strong></dt><dd></dd>
<dt><strong>exists</strong><span class="classifier">Boolean</span></dt><dd><p>True, if directory exists and False if tests fail</p>
</dd>
<dt><strong>cmd</strong><span class="classifier">String</span></dt><dd><p>command for testing if Sen2Core is working</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.do_sen2core_preprocessing">
<code class="sig-prename descclassname">OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.</code><code class="sig-name descname">do_sen2core_preprocessing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sentinel_data_dir</span></em>, <em class="sig-param"><span class="n">zipped</span></em>, <em class="sig-param"><span class="n">resolution</span></em>, <em class="sig-param"><span class="n">path_sen2core</span></em>, <em class="sig-param"><span class="n">storage_dir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/S2_PreProcessor/s2_sen2core_attcor.html#do_sen2core_preprocessing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.S2_PreProcessor.s2_sen2core_attcor.do_sen2core_preprocessing" title="Permalink to this definition">¶</a></dt>
<dd><p>calls the sen2core wrapper and the gdal_merge wrapper to carry out the
atmospheric correction and preclassification on Sentinel-1 imagery
(L1C level) required for OBIA4RTM.</p>
<p>NOTE: If you have already L2 imagery then only run the gdal_merge wrapper
and to not use this function
Make also sure that gdal_merge can be executed from the command line.</p>
<p>NOTE: Windows users might have add the gdal binaries to their PATH!!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sentinel_data_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory that contains the Level-1C data. In case
the data is zipped (default when downloaded from Copernicus) specify
the file-path of the zip</p>
</dd>
<dt><strong>zipped</strong><span class="classifier">Boolean</span></dt><dd><p>specifies if the directory with the Sat data is zipped</p>
</dd>
<dt><strong>resolution</strong><span class="classifier">Integer</span></dt><dd><p>spatial resolution of the atmospherically corrected imagery
possible value: 10, 20, 60 meters</p>
</dd>
<dt><strong>path_sen2core</strong><span class="classifier">String</span></dt><dd><p>directory containing Sen2Core software (top-most level; e.g.
/home/user/Sen2Core/). Must be the same directory as specified
during the Sen2Core installation process using the –target option</p>
</dd>
<dt><strong>storage_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory the final layer stack should be moved to. If None,
the layer stack will remain the sentinel_data_dir_l2 in the img folder</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fname_stack</strong><span class="classifier">String</span></dt><dd><p>file-path to the stacked imagery (required in OBIA4RTM)</p>
</dd>
<dt><strong>metadata_xml</strong><span class="classifier">String</span></dt><dd><p>file-path to the metadata xml file (required in OBIA4RTM)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.setup_db.create_schema"></span><p>Created on Thu Jul 25 10:15:38 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.setup_db.create_schema.check_if_exists">
<code class="sig-prename descclassname">OBIA4RTM.setup_db.create_schema.</code><code class="sig-name descname">check_if_exists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema</span></em>, <em class="sig-param"><span class="n">table_name</span></em>, <em class="sig-param"><span class="n">cursor</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/create_schema.html#check_if_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.create_schema.check_if_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>auxiiliary function to check whether a given table exists in a given schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>schema</strong><span class="classifier">String</span></dt><dd><p>name of the schema the table should be created in</p>
</dd>
<dt><strong>table_name</strong><span class="classifier">String</span></dt><dd><p>name of the table to be created</p>
</dd>
<dt><strong>cursor</strong><span class="classifier">psycopg2 Database Cursor</span></dt><dd><p>for querying the database</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>exists</strong><span class="classifier">Boolean</span></dt><dd><p>True, if table already exists, False else</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.setup_db.create_schema.create_function_statement">
<code class="sig-prename descclassname">OBIA4RTM.setup_db.create_schema.</code><code class="sig-name descname">create_function_statement</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sql_function</span></em>, <em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/create_schema.html#create_function_statement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.create_schema.create_function_statement" title="Permalink to this definition">¶</a></dt>
<dd><p>create a SQL statement for creating/ replacing a SQL function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sql_function</strong><span class="classifier">String</span></dt><dd><p>file-path to the sql-function</p>
</dd>
<dt><strong>logger</strong><span class="classifier">logging.Logger</span></dt><dd><p>for logging errors</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>sql_statement</strong><span class="classifier">String</span></dt><dd><p>processed and ready-to-execute sql statement</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.setup_db.create_schema.create_schema">
<code class="sig-prename descclassname">OBIA4RTM.setup_db.create_schema.</code><code class="sig-name descname">create_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/create_schema.html#create_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.create_schema.create_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>this function is used to generate a new schema in the OBIA4RTM database.
In case the schema already exists, nothing will happen.
The schema to be created is taken from the obia4rtm_backend.cfg file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>None</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>status</strong><span class="classifier">integer</span></dt><dd><p>zero if everything was OK</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.setup_db.create_schema.create_sql_statement">
<code class="sig-prename descclassname">OBIA4RTM.setup_db.create_schema.</code><code class="sig-name descname">create_sql_statement</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sql_file</span></em>, <em class="sig-param"><span class="n">schema</span></em>, <em class="sig-param"><span class="n">table_name</span></em>, <em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/create_schema.html#create_sql_statement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.create_schema.create_sql_statement" title="Permalink to this definition">¶</a></dt>
<dd><p>auxiiliary function to create the sql_statement required to create
the specific tables in the DB schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sql_file</strong><span class="classifier">String</span></dt><dd><p>file-path to the sql-template containing the sql-statement for creating the table</p>
</dd>
<dt><strong>schema</strong><span class="classifier">String</span></dt><dd><p>name of the schema the table should be created in</p>
</dd>
<dt><strong>table_name</strong><span class="classifier">String</span></dt><dd><p>name of the table to be created</p>
</dd>
<dt><strong>logger</strong><span class="classifier">logging.Logger</span></dt><dd><p>for logging errors</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>sql_statement</strong><span class="classifier">String</span></dt><dd><p>processed and ready-to-execute sql statement</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.setup_db.setup_postgres"></span><p>Created on Thu Jul 18 15:08:29 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py class">
<dt id="OBIA4RTM.setup_db.setup_postgres.setupDataBase">
<em class="property">class </em><code class="sig-prename descclassname">OBIA4RTM.setup_db.setup_postgres.</code><code class="sig-name descname">setupDataBase</code><a class="reference internal" href="_modules/OBIA4RTM/setup_db/setup_postgres.html#setupDataBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase" title="Permalink to this definition">¶</a></dt>
<dd><p>class for setting up a PostgresSQL database as backend for OBIA4RTM</p>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.connect_to_postgres" title="OBIA4RTM.setup_db.setup_postgres.setupDataBase.connect_to_postgres"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_to_postgres</span></code></a>(self)</p></td>
<td><p>connects to default Postgres database running on specified host in postgres.ini file to create the OBIA4RTM Postgres database</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.create_OBIA4RTM_DB" title="OBIA4RTM.setup_db.setup_postgres.setupDataBase.create_OBIA4RTM_DB"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_OBIA4RTM_DB</span></code></a>(self)</p></td>
<td><p>create the OBIA4RTM database using the specification of the postgres.uni file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.enable_extensions" title="OBIA4RTM.setup_db.setup_postgres.setupDataBase.enable_extensions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">enable_extensions</span></code></a>(self)</p></td>
<td><p>enables PostGIS and HSTORE extension required for OBIA4RTM</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_backend" title="OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_backend"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_backend</span></code></a>(self)</p></td>
<td><p>runs the whole setup-procedure for creating the OBIA4RTM backend</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_functions" title="OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_functions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_public_functions</span></code></a>(self)</p></td>
<td><p>setups the RMSE function used in OBIA4RTM for doing the inversion</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_tables" title="OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_tables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_public_tables</span></code></a>(self)</p></td>
<td><p>setups all those tables, that are required in the public schema of the OBIa4RTM backend database</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="OBIA4RTM.setup_db.setup_postgres.setupDataBase.connect_to_postgres">
<code class="sig-name descname">connect_to_postgres</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/setup_postgres.html#setupDataBase.connect_to_postgres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.connect_to_postgres" title="Permalink to this definition">¶</a></dt>
<dd><p>connects to default Postgres database running on specified host in
postgres.ini file to create the OBIA4RTM Postgres database</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>con</strong><span class="classifier">psycopg2 Database Connection</span></dt><dd><p>Connection to DEFAULT Postges database (not OBIA4RTM database)</p>
</dd>
<dt><strong>cursor</strong><span class="classifier">psycopg2 Database Cursor</span></dt><dd><p>Cursor for this default database</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.setup_db.setup_postgres.setupDataBase.create_OBIA4RTM_DB">
<code class="sig-name descname">create_OBIA4RTM_DB</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/setup_postgres.html#setupDataBase.create_OBIA4RTM_DB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.create_OBIA4RTM_DB" title="Permalink to this definition">¶</a></dt>
<dd><p>create the OBIA4RTM database using the specification of the postgres.uni
file</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>status</strong><span class="classifier">Integer</span></dt><dd><p>zero, if everything was OK</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.setup_db.setup_postgres.setupDataBase.enable_extensions">
<code class="sig-name descname">enable_extensions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/setup_postgres.html#setupDataBase.enable_extensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.enable_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>enables PostGIS and HSTORE extension required for OBIA4RTM</p>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_backend">
<code class="sig-name descname">setup_backend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/setup_postgres.html#setupDataBase.setup_backend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>runs the whole setup-procedure for creating the OBIA4RTM backend</p>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_functions">
<code class="sig-name descname">setup_public_functions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/setup_postgres.html#setupDataBase.setup_public_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>setups the RMSE function used in OBIA4RTM for doing the inversion</p>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_tables">
<code class="sig-name descname">setup_public_tables</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/setup_db/setup_postgres.html#setupDataBase.setup_public_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.setup_db.setup_postgres.setupDataBase.setup_public_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>setups all those tables, that are required in the public schema
of the OBIa4RTM backend database</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-OBIA4RTM.zonal_stats.get_mean_refl_ee"></span><p>Created on Tue Jul 30 08:29:42 2019</p>
<p>This module is part of OBIA4RTM. It is part of the optional Google-Earth-Engine
extension and extends the file-based get_mean_refl.py script to an according
GEE version.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.zonal_stats.get_mean_refl_ee.get_mean_refl_ee">
<code class="sig-prename descclassname">OBIA4RTM.zonal_stats.get_mean_refl_ee.</code><code class="sig-name descname">get_mean_refl_ee</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shp_file</span></em>, <em class="sig-param"><span class="n">img</span></em>, <em class="sig-param"><span class="n">acqui_date</span></em>, <em class="sig-param"><span class="n">scene_id</span></em>, <em class="sig-param"><span class="n">table_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/zonal_stats/get_mean_refl_ee.html#get_mean_refl_ee"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.zonal_stats.get_mean_refl_ee.get_mean_refl_ee" title="Permalink to this definition">¶</a></dt>
<dd><p>calculates mean reflectance per object in image. Uses GEE-Python bindings
for reading the shape and Sentinel-2 imagery data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>shp_file</strong><span class="classifier">String</span></dt><dd><p>file-path to ESRI shapefile with the image object boundaries</p>
</dd>
<dt><strong>img</strong><span class="classifier">ee.image.Image</span></dt><dd><p>GEE imagery containing the atmospherically collected Sentinel-2 data</p>
</dd>
<dt><strong>acqui_date</strong><span class="classifier">String</span></dt><dd><p>acquisition date of the imagery (used for linking to LUT and metadata)</p>
</dd>
<dt><strong>scene_id</strong><span class="classifier">String</span></dt><dd><p>ID of the Sentinel-2 scene</p>
</dd>
<dt><strong>table_name</strong><span class="classifier">String</span></dt><dd><p>Name of the table the object reflectance values should be written to</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="OBIA4RTM.zonal_stats.get_mean_refl_ee.transform_utm_to_wgs84">
<code class="sig-prename descclassname">OBIA4RTM.zonal_stats.get_mean_refl_ee.</code><code class="sig-name descname">transform_utm_to_wgs84</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">easting</span></em>, <em class="sig-param"><span class="n">northing</span></em>, <em class="sig-param"><span class="n">zone</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/zonal_stats/get_mean_refl_ee.html#transform_utm_to_wgs84"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.zonal_stats.get_mean_refl_ee.transform_utm_to_wgs84" title="Permalink to this definition">¶</a></dt>
<dd><p>converts UTM easting, northing to lon, lat
found on: 
<a class="reference external" href="https://stackoverflow.com/questions/343865/how-to-convert-from-utm-to-latlng-in-python-or-javascript">https://stackoverflow.com/questions/343865/how-to-convert-from-utm-to-latlng-in-python-or-javascript</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>easting</strong><span class="classifier">Float</span></dt><dd><p>UTM-Easting (m)</p>
</dd>
<dt><strong>northing</strong><span class="classifier">Float</span></dt><dd><p>UTM-Northing (m)</p>
</dd>
<dt><strong>zone</strong><span class="classifier">Integer</span></dt><dd><p>UTM-Zone number</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>lon</strong><span class="classifier">Float</span></dt><dd><p>Longitude (deg)</p>
</dd>
<dt><strong>lat</strong><span class="classifier">Float</span></dt><dd><p>Latitude (deg)</p>
</dd>
<dt><strong>alt</strong><span class="classifier">Float</span></dt><dd><p>Altitude (m)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.zonal_stats.get_mean_refl"></span><p>Created on Sat Mar  9 10:34:57 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.zonal_stats.get_mean_refl.get_mean_refl">
<code class="sig-prename descclassname">OBIA4RTM.zonal_stats.get_mean_refl.</code><code class="sig-name descname">get_mean_refl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shp_file</span></em>, <em class="sig-param"><span class="n">raster_file</span></em>, <em class="sig-param"><span class="n">acqui_date</span></em>, <em class="sig-param"><span class="n">scene_id</span></em>, <em class="sig-param"><span class="n">table_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/zonal_stats/get_mean_refl.html#get_mean_refl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.zonal_stats.get_mean_refl.get_mean_refl" title="Permalink to this definition">¶</a></dt>
<dd><p>calculates mean reflectance per object in image. Uses GDAL-Python bindings
for reading the shape and raster data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>shp_file</strong><span class="classifier">String</span></dt><dd><p>file-path to ESRI shapefile with the image object boundaries</p>
</dd>
<dt><strong>raster_file</strong><span class="classifier">String</span></dt><dd><p>file-path to raster containing Sentinel-2 imagery as GeoTiff
it is assumed that clouds/ shadows etc have already been masked out
and these pixels are set to the according NoData value</p>
</dd>
<dt><strong>acqui_date</strong><span class="classifier">String</span></dt><dd><p>acquisition date of the imagery (used for linking to LUT and metadata)</p>
</dd>
<dt><strong>scene_id</strong><span class="classifier">String</span></dt><dd><p>ID of the Sentinel-2 scene</p>
</dd>
<dt><strong>table_name</strong><span class="classifier">String</span></dt><dd><p>Name of the table the object reflectance values should be written to</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.install"></span><p>Created on Fri Jul 19 10:43:55 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py function">
<dt id="OBIA4RTM.install.install">
<code class="sig-prename descclassname">OBIA4RTM.install.</code><code class="sig-name descname">install</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">install_addons</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/install.html#install"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.install.install" title="Permalink to this definition">¶</a></dt>
<dd><p>does a full-installation of OBIA4RTM backend facilities including the
PostgreSQL database setup and copying of configuration files to a user-
accessible directory
NOTE: PostgreSQL must be almost installed as well as PostGIS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>install_addons</strong><span class="classifier">Boolean</span></dt><dd><p>Def: False; if True 6S for atmospheric correction together with GEE will
be installed -&gt; please read the requirements before!</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-OBIA4RTM.processing_api"></span><p>Created on Thu Aug  1 08:46:00 2019</p>
<p>This module is part of OBIA4RTM.</p>
<p>It is the MAIN WRAPPER around the functionalities of the OBIA4RTM software.
NOTE that the software is at an experimental state and API changes might
apply frequently whenever bugs, inconsistencies or inefficient code is identified</p>
<p>Copyright (c) 2019 Lukas Graf</p>
<p>&#64;author: Lukas Graf, <a class="reference external" href="mailto:graflukas&#37;&#52;&#48;web&#46;de">graflukas<span>&#64;</span>web<span>&#46;</span>de</a></p>
<dl class="py class">
<dt id="OBIA4RTM.processing_api.API">
<em class="property">class </em><code class="sig-prename descclassname">OBIA4RTM.processing_api.</code><code class="sig-name descname">API</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">use_gee</span></em>, <em class="sig-param"><span class="n">obia4rtm_home</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API" title="Permalink to this definition">¶</a></dt>
<dd><p>this is the main API wrapper class around the OBIA4RTM functionalities</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>use_gee</strong><span class="classifier">Boolean</span></dt><dd><p>determines if Google Earth Engine (True) or Sen2Core (False) was /
should be used for preprocessing and data handling</p>
</dd>
<dt><strong>obia4rtm_home</strong><span class="classifier">String</span></dt><dd><p>directory that contains the config files required for OBIA4RTM.
If None the default OBIA4RTM home dir (in the user profile) is used</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.do_gee_preprocessing" title="OBIA4RTM.processing_api.API.do_gee_preprocessing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">do_gee_preprocessing</span></code></a>(self, geom, acqui_date, …)</p></td>
<td><p>method to conduct the full workflow (atcorr, cloud and shadow mask, zonal stats) for imagery derived from Google Earth Engine</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.do_inversion" title="OBIA4RTM.processing_api.API.do_inversion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">do_inversion</span></code></a>(self, scene_id, …[, return_specs])</p></td>
<td><p>this method performs the actual inversion part of OBIA4RTM by taking the derived Sentinel-2 spectra on a per-object base and building a corresponding lookup-table out of ProSAIL forward runs that is then used to do the inversion by applying a RMSE cost function.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.do_sen2core_preprocessing" title="OBIA4RTM.processing_api.API.do_sen2core_preprocessing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">do_sen2core_preprocessing</span></code></a>(self, …[, …])</p></td>
<td><p>calls the full preprocessing workflow using Sen2Core</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.get_OBIA4RTM_home" title="OBIA4RTM.processing_api.API.get_OBIA4RTM_home"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_OBIA4RTM_home</span></code></a>(self)</p></td>
<td><p>prints the OBIA4RTM home directory</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.get_use_gee" title="OBIA4RTM.processing_api.API.get_use_gee"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_use_gee</span></code></a>(self)</p></td>
<td><p>prints out if Goolge Earth Engine or Sen2Core was used for preprocessing of the satellite imagery</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.process_L2data" title="OBIA4RTM.processing_api.API.process_L2data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">process_L2data</span></code></a>(self, sentinel_data_dir, …)</p></td>
<td><p>formats the output of data already acquired in ESA L2 format in the format required by OBIA4RTM and runs the zonal stats procedure to get per object reflectance values</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.set_backend_cfgfile" title="OBIA4RTM.processing_api.API.set_backend_cfgfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_backend_cfgfile</span></code></a>(self, backend_cfg)</p></td>
<td><p>set landcover configuration file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.set_landcover_cfgfile" title="OBIA4RTM.processing_api.API.set_landcover_cfgfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_landcover_cfgfile</span></code></a>(self, landcover_cfg)</p></td>
<td><p>set landcover configuration file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.set_prosail_cfgfile" title="OBIA4RTM.processing_api.API.set_prosail_cfgfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_prosail_cfgfile</span></code></a>(self, prosail_cfg)</p></td>
<td><p>set landcover configuration file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.set_soil_refl_file" title="OBIA4RTM.processing_api.API.set_soil_refl_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_soil_refl_file</span></code></a>(self, soil_refl_file)</p></td>
<td><p>set landcover configuration file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#OBIA4RTM.processing_api.API.set_tablenames" title="OBIA4RTM.processing_api.API.set_tablenames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_tablenames</span></code></a>(self)</p></td>
<td><p>sets the tablenames read from backend_cfg file into a list</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.do_gee_preprocessing">
<code class="sig-name descname">do_gee_preprocessing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">geom</span></em>, <em class="sig-param"><span class="n">acqui_date</span></em>, <em class="sig-param"><span class="n">option</span></em>, <em class="sig-param"><span class="n">shp_file</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.do_gee_preprocessing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.do_gee_preprocessing" title="Permalink to this definition">¶</a></dt>
<dd><p>method to conduct the full workflow (atcorr, cloud and
shadow mask, zonal stats) for imagery derived from Google Earth Engine</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>geom</strong><span class="classifier">List</span></dt><dd><p>list of coordinate pairs forming a polygon that is used
to determine the geograhic extent to be processed in GEE</p>
</dd>
<dt><strong>acqui_date</strong><span class="classifier">String</span></dt><dd><p>acquisition date to be processed (format: YYYY-MM-DD)</p>
</dd>
<dt><strong>option</strong><span class="classifier">Integer</span></dt><dd><p>option for cloud and shadow masking in preprocessing.
Allowed values:     1 (ESA quality information)</p>
<blockquote>
<div><p>2 (alternative algorithm)</p>
</div></blockquote>
</dd>
<dt><strong>shp_file</strong><span class="classifier">String</span></dt><dd><p>file path to the shape file with the object boundaries and the
landcover / landuse information for the particular acquisition
date
NOTE: the shapefile must be EXACTELY in the format required
by OBIA4RTM</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>scene_id</strong><span class="classifier">String</span></dt><dd><p>ID of Sentinel-2 imagery</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.do_inversion">
<code class="sig-name descname">do_inversion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">scene_id</span></em>, <em class="sig-param"><span class="n">num_best_solutions</span></em>, <em class="sig-param"><span class="n">luc_classes</span></em>, <em class="sig-param"><span class="n">return_specs</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.do_inversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.do_inversion" title="Permalink to this definition">¶</a></dt>
<dd><p>this method performs the actual inversion part of OBIA4RTM by taking
the derived Sentinel-2 spectra on a per-object base and building a
corresponding lookup-table out of ProSAIL forward runs that is then
used to do the inversion by applying a RMSE cost function. To enhance
the stability of the inversion process, a user-defined number of “best
solutions” can be used for the parameter mapping e.g. the mean of the
20 best matching inversion results in terms of the lowest RMSE between
observed and simulated Sentinel-2 spectra. The results of the inversion
process are stored in the OBIA4RTM database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>scene_id</strong><span class="classifier">String</span></dt><dd><p>ID of Sentinel-2 imagery. This is the foreign key to match the
satellite spectra with the according LUT built from ProSAIL forward
runs</p>
</dd>
<dt><strong>num_best_solutions</strong><span class="classifier">Integer</span></dt><dd><p>number of “best solutions” of the inversion process in terms of
lowest RMSE values between observed and simulated Sentinel-2 spectra
Must be in the range between 1 and &lt; number of spectra in the LUT</p>
</dd>
<dt><strong>luc_classes</strong><span class="classifier">List</span></dt><dd><p>list of land use or land cover codes to be inverted. The integer
codes must be exactly the same as in the ProSail parameterization and
the parcel classification.</p>
</dd>
<dt><strong>return_specs</strong><span class="classifier">Boolean</span></dt><dd><p>specifies whether inverted spectra should be written to the DB
(Default: True) or not. Storing the inverted spectra might help
to better understand and evaluate the quality of the performed
inversion and might help to further improve the parametrization</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>status</strong><span class="classifier">Integer:</span></dt><dd><p>status code; zero if everything was working out; -1 instead</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.do_sen2core_preprocessing">
<code class="sig-name descname">do_sen2core_preprocessing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">sentinel_data_dir</span></em>, <em class="sig-param"><span class="n">zipped</span></em>, <em class="sig-param"><span class="n">resolution</span></em>, <em class="sig-param"><span class="n">path_sen2core</span></em>, <em class="sig-param"><span class="n">shp_file</span></em>, <em class="sig-param"><span class="n">storage_dir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.do_sen2core_preprocessing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.do_sen2core_preprocessing" title="Permalink to this definition">¶</a></dt>
<dd><p>calls the full preprocessing workflow using Sen2Core</p>
<p>NOTE: Requires GDAL-Python bindings
NOTE: Do not run this method on data already in L2 level!</p>
<blockquote>
<div><p>Use process_L2data instead</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sentinel_data_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory that contains the Level-1C data. In case
the data is zipped (default when downloaded from Copernicus) specify
the file-path of the zip</p>
</dd>
<dt><strong>zipped</strong><span class="classifier">Boolean</span></dt><dd><p>specifies if the directory with the Sat data is zipped</p>
</dd>
<dt><strong>resolution</strong><span class="classifier">Integer</span></dt><dd><p>spatial resolution of the atmospherically corrected imagery
possible value: 10, 20, 60 meters</p>
</dd>
<dt><strong>path_sen2core</strong><span class="classifier">String</span></dt><dd><p>directory containing Sen2Core software (top-most level; e.g.
/home/user/Sen2Core/). Must be the same directory as specified
during the Sen2Core installation process using the –target option</p>
</dd>
<dt><strong>storage_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory the final layer stack should be moved to. If None,
the layer stack will remain the sentinel_data_dir_l2 in the img folder</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>scene_id:</dt><dd><p>ID of the processed Sentinel-2 scene</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.get_OBIA4RTM_home">
<code class="sig-name descname">get_OBIA4RTM_home</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.get_OBIA4RTM_home"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.get_OBIA4RTM_home" title="Permalink to this definition">¶</a></dt>
<dd><p>prints the OBIA4RTM home directory</p>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.get_use_gee">
<code class="sig-name descname">get_use_gee</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.get_use_gee"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.get_use_gee" title="Permalink to this definition">¶</a></dt>
<dd><p>prints out if Goolge Earth Engine or Sen2Core was used for
preprocessing of the satellite imagery</p>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.process_L2data">
<code class="sig-name descname">process_L2data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">sentinel_data_dir</span></em>, <em class="sig-param"><span class="n">resolution</span></em>, <em class="sig-param"><span class="n">shp_file</span></em>, <em class="sig-param"><span class="n">acqui_date</span></em>, <em class="sig-param"><span class="n">storage_dir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.process_L2data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.process_L2data" title="Permalink to this definition">¶</a></dt>
<dd><p>formats the output of data already acquired in ESA L2 format
in the format required by OBIA4RTM and runs the zonal stats procedure
to get per object reflectance values</p>
<p>NOTE: Requires GDAL-Python bindings
NOTE: Do not run this method on data already in L2 level!</p>
<blockquote>
<div><p>Use get_mean_refl instead</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sentinel_data_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory that contains the Level-1C data. In case
the data is zipped (default when downloaded from Copernicus) specify
the file-path of the zip</p>
</dd>
<dt><strong>resolution</strong><span class="classifier">Integer</span></dt><dd><p>spatial resolution of the atmospherically corrected imagery
possible value: 10, 20, 60 meters</p>
</dd>
<dt><strong>storage_dir</strong><span class="classifier">String</span></dt><dd><p>path to the directory the final layer stack should be moved to. If None,
the layer stack will remain the sentinel_data_dir_l2 in the img folder</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>scene_id:</dt><dd><p>ID of the processed Sentinel-2 scene</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.set_backend_cfgfile">
<code class="sig-name descname">set_backend_cfgfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">backend_cfg</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.set_backend_cfgfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.set_backend_cfgfile" title="Permalink to this definition">¶</a></dt>
<dd><p>set landcover configuration file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>backend_cfg</strong><span class="classifier">String</span></dt><dd><p>backend configuration file if not the default file should be used</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.set_landcover_cfgfile">
<code class="sig-name descname">set_landcover_cfgfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">landcover_cfg</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.set_landcover_cfgfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.set_landcover_cfgfile" title="Permalink to this definition">¶</a></dt>
<dd><p>set landcover configuration file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>landcover_cfg</strong><span class="classifier">String</span></dt><dd><p>landcover configuration file if not the default file should be used</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.set_prosail_cfgfile">
<code class="sig-name descname">set_prosail_cfgfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">prosail_cfg</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.set_prosail_cfgfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.set_prosail_cfgfile" title="Permalink to this definition">¶</a></dt>
<dd><p>set landcover configuration file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>prosail_cfg</strong><span class="classifier">String</span></dt><dd><p>prosail configuration file if not the default file should be used</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.set_soil_refl_file">
<code class="sig-name descname">set_soil_refl_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">soil_refl_file</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.set_soil_refl_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.set_soil_refl_file" title="Permalink to this definition">¶</a></dt>
<dd><p>set landcover configuration file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>soil_refl_file</strong><span class="classifier">String</span></dt><dd><p>file with soil reflectance values if not the default file should
be used</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="OBIA4RTM.processing_api.API.set_tablenames">
<code class="sig-name descname">set_tablenames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OBIA4RTM/processing_api.html#API.set_tablenames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OBIA4RTM.processing_api.API.set_tablenames" title="Permalink to this definition">¶</a></dt>
<dd><p>sets the tablenames read from backend_cfg file into a list</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Lukas Graf.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>